@model CSC407_Final.ViewModels.CommentViewModel

@{
    ViewBag.Title = "Comments";
}

<h2>Comments</h2>

<div>
    <h4>CommentViewModel</h4>
    <hr />
    <p>@Model.Thread.username posted:</p>
    <h3>@Model.Thread.postText</h3>
    <p>@Model.Thread.postDate </p>


@if (Request.IsAuthenticated)
{
    @Html.ActionLink("Create", "CreateComment", Model.Thread)
}
    @foreach (var comment in Model.Comments)
    {
        <div>@comment.username</div>
        <div>@comment.comment</div>
         <div>@comment.timestamp</div>

    if (Request.IsAuthenticated && comment.username.ToLower() == HttpContext.Current.User.Identity.Name.ToLower() || Roles.IsUserInRole("administrator"))
    {
        @Html.ActionLink("Delete", "DeleteComment", new { id=comment.threadId }) <span>|</span>
    }
    @Html.ActionLink("Back to List", "Thread/ThreadList")
    }

</div>

